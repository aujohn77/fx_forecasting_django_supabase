{% extends "base.html" %}
{% block title %}Compare{% endblock %}
{% block content %}
<section class="card">
  <h2>Forecast Accuracy (Backtests)</h2>
  <div id="metrics" class="table"></div>
</section>

<section class="card">
  <h2>Forecast vs Actual (Backtest slices)</h2>

  <!-- New controls -->
  <div class="controls" style="display:flex;gap:1rem;flex-wrap:wrap;align-items:center;margin-bottom:.75rem;">
    <label>Timeframe:
      <select id="tfPick">
        <option value="">(All)</option>
        <option value="D">Daily</option>
        <option value="W">Weekly</option>
        <option value="M">Monthly</option>
      </select>
    </label>

    <label>Model:
      <select id="modelPick">
        <option value="">(All)</option>
      </select>
    </label>

    <label>Currency:
      <select id="ccyPick">
        <option value="">(All)</option>
      </select>
    </label>

    <label>Start Date:
      <input type="date" id="startPick" value="2023-01-01">
    </label>
  </div>

  <!-- (kept for back-compat but not used anymore) -->
  <select id="seriesPick" style="display:none"></select>
  <canvas id="btChart"></canvas>
</section>

<!-- JSON blobs -->
<script id="metrics-data" type="application/json">{{ metrics_json|safe }}</script>
<script id="plot-data" type="application/json">{{ plot_json|safe }}</script>

{% load static %}
<script src="{% static 'js/compare.js' %}"></script>
{% endblock %}
