{% extends "base.html" %}
{% load static %}

{% block title %}ML Deployment Platform (FX Example){% endblock %}

{% block nav_projects_active %}nav-link-active{% endblock %}

{% block nav_row2 %}
<nav class="subnav">
  <a href="{% url 'portfolio:project_model_deploy' %}" class="nav-link nav-link-active">
    ML Deployment Platform (FX Example)
  </a>
  
  <a href="{% url 'portfolio:project_amazon_recommender' %}" class="nav-link">
    Amazon-style Product Recommender
  </a>
  <a href="{% url 'portfolio:project_lead_conversion' %}" class="nav-link">
    Lead Conversion Prediction
  </a>
  <a href="{% url 'portfolio:project_customer_segmentation' %}" class="nav-link">
    Customer Segmentation
  </a>
</nav>
{% endblock %}

{% block nav_row3 %}
<nav class="subnav">
  <a href="{% url 'market' %}" class="nav-link">Market</a>
  <a href="{% url 'forecast' %}" class="nav-link">Forecasts</a>
</nav>
{% endblock %}

{% block content %}
<section class="card">
  <h2>ML Deployment Platform (Independent Project)</h2>

  <p>
    This project provides a lightweight ML deployment platform applied to FX forecasting.
  </p>

  <h3>Features</h3>
  <ul>
    <li><strong>Infrastructure:</strong> Supabase database, Django web interface</li>
    <li><strong>Automation:</strong> Ingestion + forecasting via GitHub Actions</li>
    <li><strong>Model Layer:</strong> Registry system, Python/R execution</li>
    <li><strong>Outputs:</strong> Prediction storage, visual backtests</li>
  </ul>

  <h3>Daily Workflow</h3>
  <ul>
    <li>Daily FX rates are collected automatically from the Frankfurter API through scheduled GitHub Actions jobs.</li>
    <li>These rates are stored in a cloud Postgres database (Supabase), forming a long-term historical dataset.</li>
    <li>Another scheduled GitHub Actions task sends the latest data to the forecasting models, which return the next-day predictions.</li>
    <li>The forecasts are written back into the database, where they become available to the dashboards.</li>
    <li>The front end (Market and Forecast pages) reads directly from the database and displays both the live FX data and the outputs of the models.</li>
    <li>The system also runs backtests, which recreate past model predictions so they can be visualized on the charts.</li>
  </ul>

  <p>
    You can access the live FX views through the buttons below.
  </p>

  <!-- Project Links section -->
  <h3 style="margin-top:2rem;">Project Links</h3>

  <div style="display:flex; gap:1rem; margin-bottom:1.5rem; flex-wrap:wrap;">

    <!-- GitHub -->
    <a href="https://github.com/aujohn77/fx_forecasting_django_supabase"
       target="_blank"
       class="project-cta">
      GitHub Repository
    </a>

    <!-- Market -->
    <a href="{% url 'market' %}"
       target="_blank"
       class="project-cta project-cta-secondary">
      Market Dashboard
    </a>

    <!-- Forecast -->
    <a href="{% url 'forecast' %}"
       target="_blank"
       class="project-cta project-cta-tertiary">
      Forecast Dashboard
    </a>

  </div>


  <!-- Plug-and-Play -->
  <h3 style="margin-top:2rem;">Plug-and-Play Model Integration</h3>

  <p>You can plug in your own forecasting model by following these steps:</p>

  <div class="template-downloads">
    <p>Download the template for your language:</p>
    <ul class="download-list">
      <li>
        <a href="{% static 'downloads/python_model_template.py' %}" download>
          Python model template (.py)
        </a>
      </li>
      <li>
        <a href="{% static 'downloads/r_model_template.R' %}" download>
          R model template (.R)
        </a>
      </li>
    </ul>
  </div>

  <pre class="code-block">
Open the template and edit only the section marked:
"PART 2 ‚Äî MODEL LOGIC (THIS IS YOUR AREA)"

In "PART 3", you will see where to set your model name (e.g., 'my_model').

Then:

Python models
-------------
Save the file to:
apps/forecasting/<span style="color:#4ade80;">models_lib</span>/

Rename it to match your model name (e.g., my_model.py).

Open:
apps/forecasting/models_lib/registry.py

Add at the top:
from . import my_model

Add this to _REGISTRY:
"my_model": my_model.predict,


R models
--------
Save the file to:
apps/forecasting/<span style="color:#facc15;">r_models</span>/

Rename it to match your model name (e.g., my_model.R).

Open:
apps/forecasting/models_lib/registry.py

(You do NOT add an import at the top for R models.)

Add this to _REGISTRY:
"my_model": make_r_predictor("my_model.R"),
  </pre>


  <!-- ============================= -->
  <!-- Friendly Notes for Developers -->
  <!-- ============================= -->

  <h3 style="margin-top:2rem;">A Few Notes If You Want to Use or Build on This Platform</h3>

<p><strong>‚Ä¢ One model, all currencies</strong><br>
Just a heads-up: to keep things simple, any model you add will automatically forecast all currencies. In real FX work you‚Äôd normally have one model per currency pair, but I simplified it here so you don‚Äôt have to manage dozens of models.</p>

<p><strong>‚Ä¢ Models run from their logic (not serialized files)</strong><br>
FX data changes fast, so instead of freezing a trained model and loading it later, this platform runs the model directly from its logic every day.
That‚Äôs actually how most FX forecasting agencies do it.</p>

<p><strong>‚Ä¢ Don‚Äôt forget the packages</strong><br>
If your model needs extra libraries, just add them:<br>
‚Äì Python packages ‚Üí <code>requirements.txt</code><br>
‚Äì R packages ‚Üí inside the GitHub Actions workflow<br>
Otherwise the CI will complain üôÇ</p>

<p><strong>‚Ä¢ The default models are just placeholders</strong><br>
The models that come with the system are super basic ‚Äî just enough to demonstrate the workflow.
They usually just repeat yesterday‚Äôs rate, which is why the variation column is usually zero. So don‚Äôt use them for anything serious.</p>

<p><strong>‚Ä¢ Historical data is available</strong><br>
You can download the last 10 years of FX rates right from the platform.
That way you can experiment, build your model offline, and then plug it into the system.
Future versions will probably pull extra predictors automatically.</p>

<p><strong>‚Ä¢ How to evaluate your own models</strong><br>
If you want to measure performance, feel free to use whatever you like: MAPE, MAE, RMSE, etc.
There‚Äôs no comparison page in the project (on purpose), but you can run these metrics in your own notebook.
You can also look at AICc, which Hyndman & Athanasopoulos recommend in their forecasting <a href="https://otexts.com/fpp3/selecting-predictors.html" target="_blank">book</a>. </p>


<p><strong>‚Ä¢ Use the Ops Console for full control</strong><br>
There‚Äôs a small Ops Console where you can:<br>
‚Äì pull new FX rates<br>
‚Äì run forecasts<br>
‚Äì run backtests<br>
It writes directly to the database, so it‚Äôs password-protected and only enabled locally.</p>

<!-- Ops Console Screenshot -->
<div style="margin:1rem 0 2rem 0; text-align:center;">
  <img src="{% static 'images/ops_console.png' %}" 
       alt="Ops Console Screenshot"
       style="max-width:100%; border-radius:12px; border:1px solid #2a2f3a;">
</div>



<p><strong>‚Ä¢ About timeframes (Daily, Weekly, Monthly)</strong><br>
The original idea was to support three timeframes ‚Äî daily, weekly, and monthly. 
Most of the backend work for weekly and monthly is already there, which is why you‚Äôll see ‚ÄúWeek‚Äù options in the Ops Console. 
But they still need a few adjustments to be fully ready. For now, I‚Äôd recommend sticking to the daily timeframe ‚Äî it‚Äôs the most complete and stable.</p>


<p><strong>‚Ä¢ Dashboards are cached</strong><br>
Rates come in every day around 5:15pm, and the dashboards stay cached for 45 minutes.
If you‚Äôre tweaking a model and want to see the change immediately, just hit the ‚ÄúClear Cache‚Äù button in the Ops Console.</p>


<p><strong>‚Ä¢ A small note of gratitude</strong><br>
I also want to thank everyone who has ever contributed code to the world ‚Äî from 
the early days of computing up to today. Modern AI was trained on the combined 
work of generations of people who took the time to write and share their code, 
and we all benefit from their effort. Thanks as well to the many scientists whose 
work laid the foundations of machine learning. Without their 
contributions, and without today‚Äôs AI tools, a project like this would have taken me far longer than just a few months.</p>


<p><em>Thanks for reading through this page ‚Äî hope you have fun building and deploying your own models!</em></p>


</section>
{% endblock %}
